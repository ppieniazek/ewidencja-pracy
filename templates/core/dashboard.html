{% extends 'base.html' %}

{% block content %}
<h1>Panel Główny</h1>

{% if user.role == 'BRYGADZISTA' and user.brigade %}
<p>Zarządzasz brygadą: <strong>{{ user.brigade.name }}</strong></p>

<h3 class="mt-4">Ewidencja godzin - {{ current_month_name }} {{ current_year }}</h3>

<div class="table-responsive">
  <table class="table table-bordered table-striped">
    <thead class="table-dark">
      <tr>
        <th>Pracownik</th>
        {% for day in days %}
        <th class="text-center">{{ day }}</th>
        {% endfor %}
      </tr>
    </thead>
    <tbody>
      {% for worker in workers %}
      <tr>
        <td>{{ worker.first_name }} {{ worker.last_name }}</td>

        {# This inner loop creates a cell for each day #}
        {% for day in days %}
        <td class="text-center">
          {# Placeholder for hours - we will make this dynamic next #}
          -
        </td>
        {% endfor %}
      </tr>
      {% empty %}
      <tr>
        <td colspan="{{ days|length|add:1 }}">Brak pracowników w tej brygadzie.</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>

{% else %}
<p>Witaj w systemie, {{ user.username }}!</p>
{% endif %}

{% endblock content %}
